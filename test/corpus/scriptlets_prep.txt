===============================================================================
Prep Section (Empty)
===============================================================================

%prep

-------------------------------------------------------------------------------

(spec
  (prep_scriptlet
    (section_name)))

===============================================================================
Prep Section (%setup)
===============================================================================

%prep
%setup -q

-------------------------------------------------------------------------------

(spec
  (prep_scriptlet
    (section_name)
    (shell_block
      (setup_macro
        (builtin)
        (setup_flag)))))

===============================================================================
Prep Section (%setup with flags)
===============================================================================

%prep
%setup -c -q

-------------------------------------------------------------------------------

(spec
  (prep_scriptlet
    (section_name)
    (shell_block
      (setup_macro
        (builtin)
        (setup_flag)
        (setup_flag)))))

===============================================================================
Prep Section (%setup with source options)
===============================================================================

%prep
%setup -a 0 -b 1

-------------------------------------------------------------------------------

(spec
  (prep_scriptlet
    (section_name)
    (shell_block
      (setup_macro
        (builtin)
        (setup_source_option
          (integer))
        (setup_source_option
          (integer))))))

===============================================================================
Prep Section (%setup with name option)
===============================================================================

%prep
%setup -n custom-directory

-------------------------------------------------------------------------------

(spec
  (prep_scriptlet
    (section_name)
    (shell_block
      (setup_macro
        (builtin)
        (setup_name_option
          (word))))))

===============================================================================
Prep Section (%setup complex combination)
===============================================================================

%prep
%setup -c -n %{name} -a 1 -q

-------------------------------------------------------------------------------

(spec
  (prep_scriptlet
    (section_name)
    (shell_block
      (setup_macro
        (builtin)
        (setup_flag)
        (setup_name_option
          (macro_expansion
            (identifier)))
        (setup_source_option
          (integer))
        (setup_flag)))))

===============================================================================
Prep Section (%setup standalone)
===============================================================================

%prep
%setup -D -T

-------------------------------------------------------------------------------

(spec
  (prep_scriptlet
    (section_name)
    (shell_block
      (setup_macro
        (builtin)
        (setup_flag)
        (setup_flag)))))

===============================================================================
Prep Section (%setup edge cases)
===============================================================================

%prep
%setup -C
%setup -a 10 -n "quoted directory name"

-------------------------------------------------------------------------------

(spec
  (prep_scriptlet
    (section_name)
    (shell_block
      (setup_macro
        (builtin)
        (setup_flag))
      (setup_macro
        (builtin)
        (setup_source_option
          (integer))
        (setup_name_option
          (quoted_string
            (quoted_string_content)))))))

===============================================================================
Prep Section (%autosetup basic)
===============================================================================

%prep
%autosetup

-------------------------------------------------------------------------------

(spec
  (prep_scriptlet
    (section_name)
    (shell_block
      (autosetup_macro
        (builtin)))))

===============================================================================
Prep Section (%autosetup with VCS)
===============================================================================

%prep
%autosetup -S git

-------------------------------------------------------------------------------

(spec
  (prep_scriptlet
    (section_name)
    (shell_block
      (autosetup_macro
        (builtin)
        (autosetup_option)))))

===============================================================================
Prep Section (%autosetup with options)
===============================================================================

%prep
%autosetup -v -N -p1 -n mydir -S git_am

-------------------------------------------------------------------------------

(spec
  (prep_scriptlet
    (section_name)
    (shell_block
      (autosetup_macro
        (builtin)
        (autosetup_option)
        (autosetup_option)
        (autosetup_option)
        (autosetup_option
          (word))
        (autosetup_option)))))

===============================================================================
Prep Section (%autopatch basic)
===============================================================================

%prep
%autopatch

-------------------------------------------------------------------------------

(spec
  (prep_scriptlet
    (section_name)
    (shell_block
      (autopatch_macro
        (builtin)))))

===============================================================================
Prep Section (%autopatch with range)
===============================================================================

%prep
%autopatch -m 100 -M 200

-------------------------------------------------------------------------------

(spec
  (prep_scriptlet
    (section_name)
    (shell_block
      (autopatch_macro
        (builtin)
        (autopatch_option
          (integer))
        (autopatch_option
          (integer))))))

===============================================================================
Prep Section (%autopatch with arguments)
===============================================================================

%prep
%autopatch 1 4 6

-------------------------------------------------------------------------------

(spec
  (prep_scriptlet
    (section_name)
    (shell_block
      (autopatch_macro
        (builtin)
        (autopatch_argument
          (integer))
        (autopatch_argument
          (integer))
        (autopatch_argument
          (integer))))))

===============================================================================
Prep Section (%patch basic usage)
===============================================================================

%prep
%patch 0
%patch -P 1

-------------------------------------------------------------------------------

(spec
  (prep_scriptlet
    (section_name)
    (shell_block
      (patch_macro
        (builtin)
        (patch_argument
          (integer)))
      (patch_macro
        (builtin)
        (patch_option
          (integer))))))

===============================================================================
Prep Section (%patch with flags)
===============================================================================

%prep
%patch 0 -p 1 -E
%patch 1 -R -Z

-------------------------------------------------------------------------------

(spec
  (prep_scriptlet
    (section_name)
    (shell_block
      (patch_macro
        (builtin)
        (patch_argument
          (integer))
        (patch_option
          (integer))
        (patch_option))
      (patch_macro
        (builtin)
        (patch_argument
          (integer))
        (patch_option)
        (patch_option)))))

===============================================================================
Prep Section (%patch with string options)
===============================================================================

%prep
%patch 0 -b .orig
%patch -P 1 -o /tmp/output

-------------------------------------------------------------------------------

(spec
  (prep_scriptlet
    (section_name)
    (shell_block
      (patch_macro
        (builtin)
        (patch_argument
          (integer))
        (patch_option
          (word)))
      (patch_macro
        (builtin)
        (patch_option
          (integer))
        (patch_option
          (word))))))

===============================================================================
Prep Section (%patch complex combination)
===============================================================================

%prep
%patch 0 -p 1 -b .backup -F 2 -E
%patch -P 2 -R -z .old

-------------------------------------------------------------------------------

(spec
  (prep_scriptlet
    (section_name)
    (shell_block
      (patch_macro
        (builtin)
        (patch_argument
          (integer))
        (patch_option
          (integer))
        (patch_option
          (word))
        (patch_option
          (integer))
        (patch_option))
      (patch_macro
        (builtin)
        (patch_option
          (integer))
        (patch_option)
        (patch_option
          (word))))))

===============================================================================
Prep Section (%patch standalone)
===============================================================================

%prep
%patch 1 -p 1
%patch -P 0 -E

-------------------------------------------------------------------------------

(spec
  (prep_scriptlet
    (section_name)
    (shell_block
      (patch_macro
        (builtin)
        (patch_argument
          (integer))
        (patch_option
          (integer)))
      (patch_macro
        (builtin)
        (patch_option
          (integer))
        (patch_option)))))

===============================================================================
Prep Section (%patch edge cases)
===============================================================================

%prep
%patch 10 -F 3
%patch -b "backup with spaces" -p 0

-------------------------------------------------------------------------------

(spec
  (prep_scriptlet
    (section_name)
    (shell_block
      (patch_macro
        (builtin)
        (patch_argument
          (integer))
        (patch_option
          (integer)))
      (patch_macro
        (builtin)
        (patch_option
          (quoted_string
            (quoted_string_content)))
        (patch_option
          (integer))))))

===============================================================================
Prep Section (prepend option)
===============================================================================

%prep -p
echo "pre-prep step"

-------------------------------------------------------------------------------

(spec
  (prep_scriptlet
    (section_name)
    (scriptlet_augment_option)
    (shell_block
      (shell_content))))
