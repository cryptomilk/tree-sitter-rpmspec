# String builtin macro tests
#
# These builtins take a single string argument via colon or space syntax:
# - %{builtin:argument}
# - %{builtin argument}
#
# Builtins: echo, error, expand, getenv, getncpus, len, lower, macrobody,
#           quote, reverse, shescape, shrink, upper, verbose, warn

===============================================================================
Macro Builtin String (lower case conversion)
===============================================================================

%{lower:CamelCase}

-------------------------------------------------------------------------------

(spec
  (macro_expansion
    (builtin)
    argument: (word)))

===============================================================================
Macro Builtin String (upper case conversion)
===============================================================================

%{upper:CamelCase}

-------------------------------------------------------------------------------

(spec
  (macro_expansion
    (builtin)
    argument: (word)))

===============================================================================
Macro Builtin String (getenv environment variable)
===============================================================================

%{getenv:HOME}

-------------------------------------------------------------------------------

(spec
  (macro_expansion
    (builtin)
    argument: (word)))

===============================================================================
Macro Builtin String (quote string with spaces)
===============================================================================

%{quote:empty spaces.zip}

-------------------------------------------------------------------------------

(spec
  (macro_expansion
    (builtin)
    argument: (concatenation
      (word)
      (word))))

===============================================================================
Macro Builtin String (shrink whitespace)
===============================================================================

%{shrink:aa  bb   ccc   }

-------------------------------------------------------------------------------

(spec
  (macro_expansion
    (builtin)
    argument: (concatenation
      (word)
      (word)
      (word))))

===============================================================================
Macro Builtin String (len string length)
===============================================================================

%{len:hello world}

-------------------------------------------------------------------------------

(spec
  (macro_expansion
    (builtin)
    argument: (concatenation
      (word)
      (word))))

===============================================================================
Macro Builtin String (reverse string)
===============================================================================

%{reverse:hello}

-------------------------------------------------------------------------------

(spec
  (macro_expansion
    (builtin)
    argument: (word)))

===============================================================================
Macro Builtin String (getncpus system info)
===============================================================================

%{getncpus}

-------------------------------------------------------------------------------

(spec
  (macro_expansion
    (builtin)))

===============================================================================
Macro Builtin String (expand macro expansion)
===============================================================================

%{expand:%{version}-%{release}}

-------------------------------------------------------------------------------

(spec
  (macro_expansion
    (builtin)
    argument: (expand_content
      (macro_expansion
        (identifier))
      (expand_code)
      (macro_expansion
        (identifier)))))

===============================================================================
Macro Builtin String (echo output)
===============================================================================

%{echo:Building package}

-------------------------------------------------------------------------------

(spec
  (macro_expansion
    (builtin)
    argument: (concatenation
      (word)
      (word))))

===============================================================================
Macro Builtin String (warn warning message)
===============================================================================

%{warn:This is deprecated}

-------------------------------------------------------------------------------

(spec
  (macro_expansion
    (builtin)
    argument: (concatenation
      (word)
      (word)
      (word))))

===============================================================================
Macro Builtin String (error fatal error)
===============================================================================

%{error:Build failed}

-------------------------------------------------------------------------------

(spec
  (macro_expansion
    (builtin)
    argument: (concatenation
      (word)
      (word))))
